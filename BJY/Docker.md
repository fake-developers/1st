## 도커(Docker)

<br>

### <u>도커(Docker)란?</u>

애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼이다. 
소프트웨어를 <em>컨테이너</em>라는 표준화된 유닛으로 패키징하며, 이 <em>컨테이너</em>에는 라이브러리, 시스템 도구, 코드, 런타임 등 소프트 웨어를 실행하는 데 필요한 모든 것이 포함되어 있다.

중요한 개념 2가지로 컨테이너, 이미지가 있다.

~~~
컨테이너

호스트 OS상에 논리적인 구획을 만들고, 어플리케이션을 작동시키기 위해 필요한 라이브러리나 어플리케이션 등을 하나로 모아, 
마치 별도의 서버인 것처럼 사용할 수 있게 만든 것

장점
- 가볍고 빠른 실행 속도
- 높은 직접도
- 낮은 오버헤드

단점
- Host OS에 종속적
- 컨테이너별 커널 구성이 불가능
~~~

~~~
이미지

컨테이너 실행에 필요한 파일과 설정 값등을 포함하고 있는 것.
이미지를 실행한 상태 == 컨테이너

장점
- 같은 이미지에서 여러개의 컨테이너를 생성할 수 있고, 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 이미지는 변하지 않고 그대로 남아있는다.
- 즉, 새로운 서버가 추가되면 미리 만든 이미지를 다운받고 컨테이너를 생성하기만 하면 된다.
- 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 의존성 파일을 컴파일 하고 다른 것을 설치 할 필요성이 사라진다.
~~~

<br>

###  <u>레이어 저장 방식</u>

도커 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있어서 용량이 매우 크다. 

처음 이미지를 다운 받으면 크게 부담되지 않지만 기존 이미지에 파일이 하나 추가되었다고 다시 다운 받는 것은 비효율적이다.

그래서 **레이어**라는 개념을 도입하고 유니온 파일 시스템을 이용하여 여러개의 레이어를 하나의 파일 시스템으로 사용할 수 있게 해준다.

![layer](https://user-images.githubusercontent.com/61674527/104820751-65aca600-587a-11eb-9ff1-267ecd1d963c.jpg)

* **이미지**는 여러개의 읽기 전용 레이어로 구성되고 파일이 추가되거나 수정되면 새로운 레이어가 생성된다.
* **컨테이너**를 생성할 때도 레이어 방식을 사용하여 기존의 이미지 레이어 위에 읽기/쓰기 레이어를 추가한다.

이미지 레이어를 그대로 사용하면서 컨테이너가 실행중에 생성하는 파일이나 변경된 내용은 읽기/쓰기 레이어에 저장되므로 여러개의 컨테이너를 생성해도 최소한의 용량만 사용한다.

### <u>VM과 도커(Docker)</u> 

개발하는 입장에서는 **"배포"**를 염두하고 개발을 해야한다.
사용하는 환경, 버전, os등을 고려한 개발을 해야한다.

**--> 가상환경을 만들어서 테스트하고 그 때와 똑같은 환경을 시스템 엔지니어가 가서 구축한다.**

![docker_vm](https://user-images.githubusercontent.com/61674527/104439144-20ffe100-55d4-11eb-841e-8c6a012b47ed.jpg)

**도커(Docker)는 배포에 VM은 환경 테스팅에 초점이 맞춰져있다.**

<br>

### <u>도커(Docker)의 장단점</u>

- #### 장점

1. VM에 비해서 가볍고 빠르다.
2. 어느 환경이나 동일하게 작용한다. (사용하는 입장에서 동등하게 사용)

- #### 단점

1.  상태를 정밀하게 알기 어렵고 자유롭게 사용하기에 제약이 많다.

   <br>

### <u>도커(Docker)를 사용하는 경우</u> 

- **마이크로 서비스**
  
  도커(Docker) 컨테이너를 통해 표준화된 코드 배포를 활용하여 분산 애플리케이션 아키텍처를 구축하고 확장한다.
  
- **데이터 처리**
  
  빅 데이터 처리를 서비스로 제공한다. 데이터 및 분석 패키지를 기술자가 아닌 사용자도 실행할 수 있는 이동식 컨테이너로 패키징합니다.
  
- **서비스로서의 컨테이너**
  
  안전한 IT 관리형 인프라와 콘텐츠로 분산 애플리케이션을 구축 및 제공합니다.

<br>

<br>

<br>

### REFERENCE

* https://kamang-it.tistory.com/entry/DockerDocker%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-%EB%8F%84%EC%BB%A4%EC%9D%98-%EA%B8%B0%EC%B4%88%EC%99%80-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%84%A4%EC%B9%98%ED%95%98%EA%B3%A0-%EC%82%AC%EC%9A%A91
* https://www.redhat.com/ko/topics/containers/what-is-docker
* https://aws.amazon.com/ko/docker/
* https://captcha.tistory.com/46
* https://github.com/fake-developers/1st/blob/SJH-02/SJH/Doker.md

