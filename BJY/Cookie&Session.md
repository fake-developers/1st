## 쿠키와 세션



### <u>쿠키와 세션을 사용하는 이유</u>

**HTTP의 비연결성과 비상태성을 보완**하여 서버가 클라이언트를 식별하게 해주는 것이 쿠키와 세션

~~~
Connectionless(비연결지향)

클라이언트에서 서버 요청을 보내면 서버는 클라이언트에 응답을 하고 연결을 끊는 특성
~~~

~~~
Stateless(상태 없음)

연결을 끊는 순간 클라이언트와 서버의 통신이 끝나면 상태 정보를 유지하지 않는 특성
~~~

> 장점 : 연결 유지를 안하기 때문에 서버 리소스 낭비가 줄어듬
>
> 단점  : 통신할 때마다 새로 커넥션을 만들어야함.
>              사용자 식별이 불가해 요청 할 때마다 새로운 사용자로 인식.



### <u>쿠키(Cookie)</u> 

클라이언트 로컬(local)에 저장되는 Key-Value쌍의 작은 데이터파일

* 구성요소 : 이름, 값(쿠키의 이름과 관련), 유효시간, 도메인, 경로
* 동작방식
  ![cookie](https://user-images.githubusercontent.com/61674527/104108697-19a5b280-530a-11eb-9024-98db0d1a7671.jpg)

> 클라이언트가 서버에 로그인 요청을 하면 서버는 유효성 확인 후 쿠키 제공
> 이후, 클라이언트가 서버에 요청을 할 때 쿠키를 자동으로 헤더에 추가하여 요청함



### <u>세션(Session)</u> 

일정 시간동안 브라우저로부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 일정하게 유지시키는 기술.
클라이언트의 정보를 세션 ID를 부여하여 서비스가 돌아가는 서버에 저장하는 것

* 동작방식
  ![session](https://user-images.githubusercontent.com/61674527/104108710-288c6500-530a-11eb-893c-051a1bfa1a50.jpg)

> 클라이언트가 서버에 로그인 요청을 하면 서버는 유효성 확인 후 클라이언트에 유일한 ID부여
> 이후, 클라이언트는 요청 시 Session ID가 담겨있는 쿠키를 헤더에 넣어 전송

* 세션을 통해 클라이언트의 정보는 서버에 두고, 세션 아이디를 이용해서 인증받고 정보를 이용`하는 방식



### <u>쿠키 VS 세션</u>

|                           |                      쿠키(Cookie)                      |                 세션(Session)                  |
| :-----------------------: | :----------------------------------------------------: | :--------------------------------------------: |
|       **저장 형식**       |                          text                          |                     object                     |
|       **저장 위치**       |                         client                         |                     server                     |
|         **보안**          |              로컬 (취약함, 변질 우려 有)               |                  서버 (좋음)                   |
|         **속도**          |                          빠름                          |                      느림                      |
| **리소스(사용되는 자원)** |                  클라이언트의 리소스                   |                 서버의 리소스                  |
|       **만료 시점**       | 쿠키 저장 시 설정<br />(설정 없을 시 브라우저 종료 시) | 브라우저 종료시<br />정한 시간과 관계없이 만료 |
|       **용량 제한**       |         도메인 당 20개<br />1 쿠키 당 최대 4KB         |                   제한 없음                    |

![cookie_session](https://user-images.githubusercontent.com/61674527/104108718-3641ea80-530a-11eb-960d-3f5ee21a9fcf.jpg)

#### <u>사용 예시</u>

|                            Cookie                            |              Session               |
| :----------------------------------------------------------: | :--------------------------------: |
| 일주일간 다시 보지 않기<br />쇼핑몰 장바구니 기능<br />최근 검색한 상품들을 광고에서 추천 | 쿠키에 담기 민감하거나 중요한 정보 |







### REFERENCE

* https://github.com/fake-developers/1st/blob/KJY-01/KJY/%5BWEB%5D%20%EC%BF%A0%ED%82%A4%EC%99%80%20%EC%84%B8%EC%85%98.md
* https://github.com/fake-developers/1st/blob/SJH-01/SJH/Cookie%26Session.md
* https://devuna.tistory.com/23

