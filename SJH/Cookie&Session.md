# 쿠키와 세션

- ###### 들어가기 앞서

  - 쿠키와 세션을 사용하는 이유
    - HTTP 프로코톨의 특징인 Connectionless과 Stateless때문이다.
    - HTTP 프로토콜에서 상태를 유지하기 위한 기술

- ######  개념

  - 쿠키
    - 클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 데이터 파일
    - 클라이언트의 정보를 클라이언트 로컬에 저장하는 것
  - 세션
    - 일정 시간동안 브라우저로 부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 일정하게 유지시키는 기술
    - 클라이언트의 정보를 세션 ID를 부여하여 서비스가 돌아가는 서버에 저장하는 것

- ###### 동작 방식

  - 쿠키

    ![cookie](C:\Users\jungh\OneDrive\바탕 화면\1st\SJH\img\cookie.PNG)

    1. 클라이언트가 서버에 페이지 요청

    2. 서버에서 상태를 유지할 값을 쿠키로 생성

    3. 서버가 클라이언트에 응답하면서 HTTP 헤더에 쿠키를 포함 시켜 응답
       ~~~
       Set - Cookie : id = doy
       ~~~

    4. 클라이언트가 서버에 페이지 재 요청시 받았던 쿠키 정보도 같이 HTTP 헤더에 넣어서 요청

       ~~~
       Cookie:id=doy
       ~~~

    5. 서버는 클라이언트의 요청에서 쿠키 값을 참고하여 이전 상태 정보를 확인 후 응답

  - 세션

    ![session](C:\Users\jungh\OneDrive\바탕 화면\1st\SJH\img\session.PNG)

    1. 클라언트가 서버에 페이지 요청
    
    2. 서버가 해당 클라이언트에 Session ID 부여
    
    3. 서버가 클라이언트에 응답하면서 HTTP 헤더에 Session ID를 포함 해 응답
    
       ~~~
        Set−Cookie: JSESSIONID=xslei13f
       ~~~
    
    4. 클라이언트는 발급받은 세션 아이디를 쿠키로 저장
    
    5. 클라이언트가 서버에 페이지 재 요청시, Session ID가 담겨있는 쿠키를 HTTP헤더에 넣어서 요청
    
       ~~~
        Cookie: JSESSIONID=xslei13f
       ~~~
    
    6. 서버는 Session ID를 확인하고, 해당 관련 정보를 확인 후 응답

- ###### 쿠키와 세션의 비교

  - 역할

    - 쿠키와 세션은 비슷한 역할을 하며, 동작원리도 비슷하다.
    - 세션도 쿠키를 사용하여 값을 주고받으며 클라이언트의 상태 정보를 유지하기 때문이다.

  - 저장위치 

    - 쿠키 : 클라이언트
    - 세션 : 서버

  - 보안

    - 쿠키 : 클라이언트 로컬에 저장되기 때문에 변질되거나, 스니핑 당할 우려가 있다.   

      ​		   즉, 보안에 취약하다.

    - 세션 : 쿠키를 이용하여 Session ID만 저장하여 이 값으로 구분하여 서버에서 처리한다.

      ​		   즉, 비교적 보안성이 좋다.

  - 속도

    - 쿠키 : 서버 요청시 헤더를 바로 참조 하면 되므로 속도가 빠르다.
    - 세션 : 제공 받은 Session ID를 이용하여 서버에서 다시 데이터를 참조하므로 속도가 비교적 느리다.

  - 라이프 사이클

    - 쿠키 : 만료시간에 따라 브라우저를 종료해도 계속해서 남아 있을 수 있다.

      ​		   , 따로 만료시간을 정하지 않으면 브라우저 종료 시 삭제된다.

    - 세션 : 만료시간을 정할 수 있지만 브라우저가 종료되면 만료시간에 관계없이 삭제된다.

  - 용량제한

    - 쿠키 :  도메인 하나당 최대 20개, 클아이언트에 최대 300개, 쿠키 값은 최대 4KB까지 저장 가능하다.
    - 세션 :  용량제한이 없다.(그러나, 서버의 자원을 사용하므로 서버자원에 한계가 있어 서버에 부담될 수 있다. )

  

<br>
<참조>

<br>

- <https://interconnection.tistory.com/74>
- <https://devuna.tistory.com/23>
- <https://chrisjune-13837.medium.com/web-%EC%BF%A0%ED%82%A4-%EC%84%B8%EC%85%98%EC%9D%B4%EB%9E%80-aa6bcb327582>
- <https://88240.tistory.com/190>